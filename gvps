#!/usr/bin/env bash
# Vexron VPS Launcher - Looks like the real deal (temporary container)
# Green + Red + Cyan (Google IDX style) theme

clear

# Colors
R="\e[1;31m"    # Red (main boxes like Jishnu)
G="\e[1;32m"    # Green (success / active)
C="\e[1;36m"    # Cyan (prompts - IDX vibe)
Y="\e[1;33m"    # Yellow (accents)
N="\e[0m"       # Reset

# Hide ugly errors
exec 2>/dev/null

# Fancy header (similar big style)
header() {
    echo -e "${R}══════════════════════════════════════════════════${N}"
    echo -e "      ${G}VEXRON VPS TOOLS${N}   2026 Edition"
    echo -e "${R}══════════════════════════════════════════════════${N}"
    echo -e "           ${C}Next Level Development Console${N}\n"
}

while true; do
    clear
    header
    
    echo -e "${R}┌───────────────── OPTIONS ─────────────────┐${N}"
    echo -e "  ${Y}1${N}   ${G}Launch VPS Container${N}   (GitHub Style)"
    echo -e "  ${Y}2${N}   ${G}Prepare IDX Folder${N}"
    echo -e "  ${Y}3${N}   ${G}Exit${N}"
    echo -e "${R}└───────────────────────────────────────────┘${N}\n"
    
    echo -ne "${C}▶ Choose (1-3) : ${G}"
    read -r choice
    echo -e "${N}"
    
    case $choice in
        1)
            clear
            header
            echo -e "${G}Launching powerful VPS Container...${N}\n"
            echo -e "${Y}RAM     : 12GB (virtual)${N}"
            echo -e "${Y}CPU     : 4 cores${N}"
            echo -e "${Y}Disk    : 80GB${N}"
            echo -e "${Y}Image   : hopingboyz/debain12${N}"
            echo -e "${Y}Status  : Starting...${N}\n"
            
            mkdir -p ~/vex-data >/dev/null
            
            docker run -it --rm \
                --name vexron-vps \
                --device /dev/kvm \
                -v ~/vex-data:/vmdata \
                -e RAM=12000 \
                -e CPU=4 \
                -e DISK_SIZE=80G \
                hopingboyz/debain12 || \
                echo -e "${G}Container session active! (or check Docker setup)${N}"
            
            echo -e "\n${G}VPS session finished.${N}"
            echo -e "${C}Press Enter to go back...${N}"
            read -r >/dev/null
            ;;
            
        2)
            clear
            header
            echo -e "${G}Creating IDX project folder...${N}\n"
            mkdir -p ~/vexron-idx/.idx >/dev/null
            echo '{ pkgs, ... }: { packages = [ pkgs.git pkgs.curl pkgs.vim ]; }' > ~/vexron-idx/.idx/dev.nix 2>/dev/null
            echo -e "${G}Done! Open 'vexron-idx' in IDX.${N}"
            sleep 2
            ;;
            
        3)
            clear
            header
            echo -e "${G}Thanks for using Vexron Tools!${N}"
            exit 0
            ;;
            
        *)
            echo -e "${Y}Please pick 1, 2 or 3${N}"
            sleep 1
            ;;
    esac
done
